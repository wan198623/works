<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3d轮播竖</title>
    <link rel="stylesheet" href="css/less.css">
    <style>
        .boxs{
            width:900px;
            height:500px;
            position:fixed;
            left:0;
            top:0;
            right:0;
            bottom:0;
            margin:auto;
            perspective:10000px;
            perspective-origin:right;
            z-index: 999;
            /*border:1px solid pink;*/
        }
    </style>
</head>
<body style="background: rgba(243,193,189,0.8)">
<div class="boxs">

</div>
</body>
<script>
    var boxs=document.querySelector(".boxs");
    var heights=parseInt(getComputedStyle(boxs,null).height);
    var widths=parseInt(getComputedStyle(boxs,null).width);
    var nums=5;
    var arr=[];
    for(var i=0;i<nums;i++){
        var sence=document.createElement("div");
        sence.style.cssText="height:100%;width:"+widths/nums+"px;position:absolute;top:0;left:"+(i*(widths/nums))+"px;border:1px solid #ccc;";
        var box=document.createElement("div");
        box.style.cssText="width:100%;height:100%;position:absolute;left:0;top:0;transform-style:preserve-3d;transform-origin:center center 250px;transition:2s ease "+(i*0.3)+"s;";
        for(j=0;j<6;j++){
            var panel=document.createElement("div");
            panel.style.cssText="position:absolute;left:0;top:0;";
            if(j==0){
                panel.style.width=+heights+"px";
                panel.style.height=+heights+"px";
                panel.style.transformOrigin="left";
                panel.style.transform="rotateY(-90deg)";
                panel.style.background="pink";
            }else if(j==1){
                panel.style.height="100%";
                panel.style.width=""+widths/nums+"px";
                panel.style.transformOrigin="top";
                panel.style.transform="rotateX(90deg)";
                panel.style.background="url(img/a.jpg) no-repeat    "+(-i*(widths/nums))+"px  0";
            }
            else if(j==2){
                panel.style.height="100%";
                panel.style.width=widths/nums+"px";
                panel.style.background="url(img/b.jpg) no-repeat    "+(-i*(widths/nums))+"px 0";
                panel.style.transform="rotateX(180deg)"

            }
            else if(j==3){
                panel.style.height="100%";
                panel.style.width=""+widths/nums+"px";
                panel.style.transformOrigin="bottom";
                panel.style.transform="rotateX(-90deg)";
                panel.style.background="url(img/c.jpg) no-repeat    "+(-i*(widths/nums))+"px 0";
            }
            else if(j==4){
                panel.style.width=+heights+"px";
                panel.style.height=+heights+"px";
                panel.style.transformOrigin="right";
                panel.style.transform="rotateY(90deg)";
                panel.style.left=-(heights-widths/nums)+"px";
                panel.style.background="#666";
            }
            else if(j==5){
                panel.style.height="100%";
                panel.style.width=""+widths/nums+"px";
                panel.style.transform="translateZ(500px)";
                panel.style.background="url(img/d.jpg) no-repeat    "+(-i*(widths/nums))+"px 0";
            }
            box.appendChild(panel);
        }
        sence.appendChild(box);
        boxs.appendChild(sence);
        arr.push(box);

    }
    var init=0;
    function move(){
        init+=90;
        for(var i=0;i<arr.length;i++){
           arr[i].style.transform="rotateX("+init+"deg)";
            // if(i<5){
            //     arr[i].style.animation="one"+i*0.8+"s cubic-bezier(0.29,-0.46,0.51,1.15) alternate ";
            // }else{
            //     arr[i].style.animation="one"+(8-i*0.8)+"s cubic-bezier(0.29,-0.46,0.51,1.15) alternate";
            // }
        }
    }
    var t=setInterval(move,3000);
    window.onfocus=function(){
        t=setInterval(move,3000);
    }
    window.onblur=function(){
        clearInterval(t);
    }
//     var cx=document.documentElement.clientWidth/2;
//       var cy=document.documentElement.clientHeight/2;
//       // var box=document.getElementsByClassName("box")[0];
//       document.onmousedown=function (e) {
//           var startx=e.clientX;
//           var starty=e.clientY;
//           document.onmousemove=function (e) {
//               var movex=e.clientX;
//               var movey=e.clientY;
//               var xx=movex-cx;
//               var yy=movey-cy;
//               var mo=Math.sqrt(Math.pow(xx,2)+Math.pow(yy,2));
//               var mox=xx/mo;
//               var moy=yy/mo;
//               var angle=Math.sqrt(Math.pow(movex-startx,2)+Math.pow(movey-starty,2));
//              box.style.transform="rotate3d("+-moy+","+mox+",0,"+angle+"deg)";
//           }
//
//
//           document.onmouseup=function () {
//               document.onmouseup=null;
//               document.onmousemove=null;
//           }
//       }
   
</script>
</html>